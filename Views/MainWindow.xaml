<sf:ChromelessWindow x:Class="XYCordReader.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:XYCordReader"
        xmlns:syncfusionskin ="clr-namespace:Syncfusion.SfSkinManager;assembly=Syncfusion.SfSkinManager.WPF"
        xmlns:vm="clr-namespace:XYCordReader.ViewModels"
        xmlns:sf="http://schemas.syncfusion.com/wpf"
        xmlns:gc="clr-namespace:IDEA.GAGMVVM.Converters"
        xmlns:sys="clr-namespace:System;assembly=mscorlib"
        mc:Ignorable="d"
                     
        syncfusionskin:SfSkinManager.Theme="{syncfusionskin:SkinManagerExtension ThemeName=MaterialLightBlue}"
        UseNativeChrome="False"
        
        WindowStartupLocation="CenterScreen"
        Title="{Binding Title}" 
        Height="450" Width="800"
    >

    <sf:ChromelessWindow.DataContext>
        <vm:MainViewModel/>
    </sf:ChromelessWindow.DataContext>

    <sf:ChromelessWindow.Resources>
        <ResourceDictionary>
            <gc:BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
            <gc:InverseBooleanConverter x:Key="InverseBooleanConverter"/>

        </ResourceDictionary>
    </sf:ChromelessWindow.Resources>

    <DockPanel Margin="10">
        <!-- Top panel -->
        <DockPanel DockPanel.Dock="Top" Margin="0,0,0,10">
            <Label DockPanel.Dock="Left" Content="Port:"/>
            <ComboBox DockPanel.Dock="Left" 
                      ItemsSource="{Binding PortNameList}" 
                      SelectedValue="{Binding PortName}"
                      IsEnabled="{Binding IsConnected, Converter={StaticResource InverseBooleanConverter}}"
                      MinWidth="100"/>
            <Button DockPanel.Dock="Left" Content="_Refresh" 
                    Command="{Binding RefreshPortNameList}" 
                    IsEnabled="{Binding IsConnected, Converter={StaticResource InverseBooleanConverter}}"
                    Margin="5,0" Padding="5"
                    />
            <Button DockPanel.Dock="Left" Content="_Connect" 
                    Command="{Binding ConnectPort}"
                    Margin="5,0" Padding="5">
                <Button.Visibility>
                    <Binding Path = "IsConnected" Converter="{StaticResource BooleanToVisibilityConverter}">
                        <Binding.ConverterParameter>
                            <x:Array Type = "{x:Type sys:Object}">
                                <Visibility>Collapsed</Visibility>
                                <Visibility>Visible</Visibility>
                            </x:Array>
                        </Binding.ConverterParameter>
                    </Binding>
                </Button.Visibility>
            </Button>
            <Button DockPanel.Dock="Left" Content="_Disconnect" 
                    Command="{Binding DisConnectPort}" 
                    Margin="5,0" Padding="5">
                <Button.Visibility>
                    <Binding Path = "IsConnected" Converter="{StaticResource BooleanToVisibilityConverter}">
                        <Binding.ConverterParameter>
                            <x:Array Type = "{x:Type sys:Object}">
                                <Visibility>Visible</Visibility>
                                <Visibility>Collapsed</Visibility>
                            </x:Array>
                        </Binding.ConverterParameter>
                    </Binding>
                </Button.Visibility>
            </Button>
            <Button DockPanel.Dock="Left" Content="_Homing (G28, G92)" 
                    Command="{Binding Homing}" 
                    IsEnabled="{Binding IsConnected}"
                    HorizontalAlignment="Left" Margin="5,0" Padding="5"
                    />
            <Button DockPanel.Dock="Left" Content="_Get Current XYZ (M114)" 
                    Command="{Binding GetCurrentXYZ}" 
                    IsEnabled="{Binding IsConnected}"
                    HorizontalAlignment="Left" Margin="5,0" Padding="5"
                    />
        </DockPanel>

        <!-- Bottom panel -->
        <DockPanel DockPanel.Dock="Bottom" Margin="0,10,0,0">
            <Button DockPanel.Dock="Right" Content="E_xit" Command="{Binding TryClose}" Margin="5,0,0,0" Padding="5" />
            <Button DockPanel.Dock="Right" Content="_Export…" HorizontalAlignment="Right" Margin="5,0" Padding="5"/>
        </DockPanel>

        <!-- Center panel -->
        <DockPanel DockPanel.Dock="Top">
            
            <!-- Settings -->
            <DockPanel DockPanel.Dock="Right" Margin="10,0,0,0">
                <Grid DockPanel.Dock="Top" VerticalAlignment="Top" ShowGridLines="True">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                        <ColumnDefinition />
                        <ColumnDefinition />
                        <ColumnDefinition />
                    </Grid.ColumnDefinitions>
                    
                    <Grid.RowDefinitions>
                        <RowDefinition />
                        <RowDefinition />
                        <RowDefinition />
                        <RowDefinition />
                    </Grid.RowDefinitions>

                    <Label Grid.Row="0" Grid.Column="0" Content=" "/>
                    <Label Grid.Row="0" Grid.Column="1" Content="X"/>
                    <Label Grid.Row="0" Grid.Column="2" Content="Y"/>
                    <Label Grid.Row="0" Grid.Column="3" Content="Z"/>
                    <Label Grid.Row="1" Grid.Column="0" Content="Current"/>
                    <Label Grid.Row="2" Grid.Column="0" Content="Relative"/>
                    <Label Grid.Row="3" Grid.Column="0" Content="Zero"/>

                    <Label Grid.Row="1" Grid.Column="1" Content="{Binding CurrentX}"/>
                    <Label Grid.Row="1" Grid.Column="2" Content="{Binding CurrentY}"/>
                    <Label Grid.Row="1" Grid.Column="3" Content="{Binding CurrentZ}"/>
                    <Label Grid.Row="2" Grid.Column="1" Content="0.00"/>
                    <Label Grid.Row="2" Grid.Column="2" Content="0.00"/>
                    <Label Grid.Row="2" Grid.Column="3" Content="0.00"/>
                    <Label Grid.Row="3" Grid.Column="1" Content="0.00"/>
                    <Label Grid.Row="3" Grid.Column="2" Content="0.00"/>
                    <Label Grid.Row="3" Grid.Column="3" Content="0.00"/>
                </Grid>

                <DockPanel DockPanel.Dock="Top" VerticalAlignment="Top">
                    <Label DockPanel.Dock="Top" Content="Set zero position"/>
                    <Button DockPanel.Dock="Left" Content="X" Padding="10,0" Margin="5,0"/>
                    <Button DockPanel.Dock="Left" Content="Y" Padding="10,0" Margin="5,0"/>
                    <Button DockPanel.Dock="Left" Content="Z" Padding="10,0" Margin="5,0"/>
                    <Button DockPanel.Dock="Left" Content="X Y Z" Padding="10,0" Margin="5,0" HorizontalAlignment="Left" />
                </DockPanel>

                <DockPanel DockPanel.Dock="Top" VerticalAlignment="Top">
                    <Label DockPanel.Dock="Top" Content="Set Step &amp; Speed"/>

                    <Grid DockPanel.Dock="Top" VerticalAlignment="Top" ShowGridLines="True">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition />
                            <ColumnDefinition />
                            <ColumnDefinition />
                        </Grid.ColumnDefinitions>

                        <Grid.RowDefinitions>
                            <RowDefinition />
                            <RowDefinition />
                            <RowDefinition />
                            <RowDefinition />
                            <RowDefinition />
                        </Grid.RowDefinitions>

                        <Label Grid.Row="0" Grid.Column="0" Content="Key"/>
                        <Label Grid.Row="0" Grid.Column="1" Content="Step &#x0a;[mm]"/>
                        <Label Grid.Row="0" Grid.Column="2" Content="Speed &#x0a;[mm/s]"/>
                        <Label Grid.Row="1" Grid.Column="0" Content="Normal"/>
                        <Label Grid.Row="2" Grid.Column="0" Content="Ctrl"/>
                        <Label Grid.Row="3" Grid.Column="0" Content="Shift"/>
                        <Label Grid.Row="4" Grid.Column="0" Content="Alt"/>

                        <TextBox  Grid.Row="1" Grid.Column="1" Text="10.00"/>
                        <TextBox  Grid.Row="1" Grid.Column="2" Text="10.00"/>
                        <TextBox  Grid.Row="2" Grid.Column="1" Text="10.00"/>
                        <TextBox  Grid.Row="2" Grid.Column="2" Text="10.00"/>
                        <TextBox  Grid.Row="3" Grid.Column="1" Text="10.00"/>
                        <TextBox  Grid.Row="3" Grid.Column="2" Text="10.00"/>
                        <TextBox  Grid.Row="4" Grid.Column="1" Text="10.00"/>
                        <TextBox  Grid.Row="4" Grid.Column="2" Text="10.00"/>
                    </Grid>

                </DockPanel>

                
                
            </DockPanel>

            <!-- Coordinates -->
            <DockPanel DockPanel.Dock="Left">
                <DataGrid Name="DG1" ItemsSource="{Binding}" AutoGenerateColumns="False">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Line"/>
                        <DataGridTextColumn Header="Abs X" />
                        <DataGridTextColumn Header="Abs Y" />
                        <DataGridTextColumn Header="Rel X" />
                        <DataGridTextColumn Header="Rel Y" />
                    </DataGrid.Columns>
                </DataGrid>
            </DockPanel>


        </DockPanel>

    </DockPanel>
</sf:ChromelessWindow>
